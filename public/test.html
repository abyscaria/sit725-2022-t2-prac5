<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=200, initial-scale=1">

  <title>SIT 725 Prac 2</title>
  <meta name="description" content="basic template for SIT 725 Prac 2">
  <meta name="author" content="Aby Scaria">

  <meta property="og:title" content="SIT 725 Prac 2">
  <meta property="og:type" content="website">
  <meta property="og:description" content="basic template for SIT 725 Prac 2">

  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

</head>

<body>

  <h1>Add TWO Numbers</h1>
  <form>
    Number 1: <input type="number" name="a" id="a"><br>
    Number 2: <input type="number" name="b" id="a"><br>
    <button onclick="add()">Add</button>
  </form>
  <script>
    function add() {
      var m = document.getElementById("a").value;
      var n = document.getElementById("b").value;
      var sum = m + n;
    }
  </script>

  <form>
  Total: <input type="number" name="total" id="total"><br>
  </form>
  <script>
    document.addEventListener("Add", sendData);
    function sendData(e) {
      e.preventDefault();
      const a = document.querySelector("#num1").value;
      const b = document.querySelector("#num2").value;

      fetch("/addNumbers", {
        method: "GET",
        headers: {
          Accept: "application/json",
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          a: parseInt(a),
          b: parseInt(b)
        })
      })
        .then(res => res.json())
        .then(data => {
          const { result } = data;
          document.querySelector(
            ".result"
          ).innerText = `The sum is: ${result}`;
        })
        .catch(err => console.log(err));
    }
  </script>

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="js/scripts.js"></script>
</body>
</html>